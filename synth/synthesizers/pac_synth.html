
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Private Aggregate Seeded from PAC-Synth &#8212; OpenDP SmartNoise Synthesizers</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'synthesizers/pac_synth';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Differentially Private Conditional Tabular GAN (DPCTGAN)" href="dpctgan.html" />
    <link rel="prev" title="Maximum Spanning Tree (MST)" href="mst.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="None">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fas fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
   


<a class="navbar-brand logo" href="http://docs.smartnoise.org">

  
  
  
  
  
  
  

  
    <img src="../_static/smartnoise-logo.svg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/smartnoise-logo.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item current active">
                    <a class="nav-link" href="index.html">
                        Synthesizer Reference
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../transforms/index.html">
                        Data Transformers
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
  <i class="fas fa-search"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://github.com/opendp/smartnoise-sdk" title="GitHub" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://twitter.com/opendp_org" title="Twitter" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://github.com/opendp/opendp/discussions" title="GitHub Discussions" class="nav-link" rel="noopener" target="_blank"><span><i class="far fa-comments"></i></span>
            <label class="sr-only">GitHub Discussions</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
  <i class="fas fa-search"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fas fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item current active">
                    <a class="nav-link" href="index.html">
                        Synthesizer Reference
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../transforms/index.html">
                        Data Transformers
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://github.com/opendp/smartnoise-sdk" title="GitHub" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://twitter.com/opendp_org" title="Twitter" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://github.com/opendp/opendp/discussions" title="GitHub Discussions" class="nav-link" rel="noopener" target="_blank"><span><i class="far fa-comments"></i></span>
            <label class="sr-only">GitHub Discussions</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="aim.html">
   AIM
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mwem.html">
   MWEM
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mst.html">
   MST
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   PAC-Synth
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="dpctgan.html">
   DP-CTGAN
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="patectgan.html">
   PATE-CTGAN
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="pategan.html">
   PATE-GAN
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dpgan.html">
   DP-GAN
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="quail.html">
   QUAIL
  </a>
 </li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="private-aggregate-seeded-from-pac-synth">
<h1>Private Aggregate Seeded from PAC-Synth<a class="headerlink" href="#private-aggregate-seeded-from-pac-synth" title="Permalink to this headline">#</a></h1>
<p>A differentially-private synthesizer that computes differentially private marginals to build synthetic data. It will aggregate n-way marginals up to and including a specified reporting length, and synthesize data based on the computed aggregated counts.</p>
<p>Based on the <a class="reference external" href="https://github.com/microsoft/synthetic-data-showcase">Synthetic Data Showcase project</a>. DP documentation available <a class="reference external" href="https://github.com/microsoft/synthetic-data-showcase/tree/main/docs/dp">here</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">snsynth</span> <span class="kn">import</span> <span class="n">Synthesizer</span>

<span class="n">pums</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;PUMS.csv&quot;</span><span class="p">)</span>

<span class="n">synth</span> <span class="o">=</span> <span class="n">Synthesizer</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;pacsynth&quot;</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">synth</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">pums</span><span class="p">,</span> <span class="n">preprocessor_eps</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">pums_synth</span> <span class="o">=</span> <span class="n">synth</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<p>The pac-synth synthesizer will suppress marginal combinations that could uniquely fingerprint individuals.  Unlike the other synthesizers, however, this synthesizer attempts to minimize the number of spurious dimension combinations that are generated.  This may be desirable in some settings, where the goal is to generate synthetic data with dimensions that are as similar as possible to the original data.  To achieve this dimensional fidelity, the pac-synth synthesizer will sometimes generate rows with missing values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">snsynth.aggregate_seeded</span> <span class="kn">import</span> <span class="n">AggregateSeededSynthesizer</span>

<span class="c1"># this generates a random pandas data frame with 5000 records</span>
<span class="c1"># replace this with your own data</span>
<span class="n">sensitive_df</span> <span class="o">=</span> <span class="n">gen_data_frame</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>

<span class="c1"># build synthesizer</span>
<span class="n">synth</span> <span class="o">=</span> <span class="n">AggregateSeededSynthesizer</span><span class="p">(</span><span class="n">epsilon</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">synth</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">sensitive_df</span><span class="p">)</span>

<span class="c1"># sample 5000 records and build a data frame</span>
<span class="n">synthetic_df</span> <span class="o">=</span> <span class="n">sensitive_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5000</span><span class="p">)</span>

<span class="c1"># show 10 example records</span>
<span class="nb">print</span><span class="p">(</span><span class="n">synthetic_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>

<span class="c1"># this will output</span>
<span class="c1">#      H1 H2  H3 H4 H5 H6 H7 H8 H9 H10</span>
<span class="c1"># 2791  2         1  0  1  1  1  0   1</span>
<span class="c1"># 2169  1  3   4  1  0  1  0  1  1   0</span>
<span class="c1"># 4607     4   7  1  1  0  1  1  1   0</span>
<span class="c1"># 4803  1      8  0  0  0  1  1  1   1</span>
<span class="c1"># 2635         8  0  1  1  1  0  1   0</span>
<span class="c1"># 537   1         1  1  1  1  1  0   0</span>
<span class="c1"># 3495     6   7  0  0  1  0  0  1   0</span>
<span class="c1"># 2009  1  3   3  0  0  1  0  1  1   0</span>
<span class="c1"># 3214  1  5      1  1  1  1  1  0   1</span>
<span class="c1"># 4879  2  5  10  0  1  1  1  1  1   1</span>
</pre></div>
</div>
<p>For more, see the <a class="reference external" href="https://github.com/opendp/smartnoise-sdk/tree/main/synth/samples/aggregate_seeded_sample">samples notebook</a>.</p>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">#</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="snsynth.aggregate_seeded.AggregateSeededSynthesizer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">snsynth.aggregate_seeded.</span></span><span class="sig-name descname"><span class="pre">AggregateSeededSynthesizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">reporting_length=3</span></em>, <em class="sig-param"><span class="pre">epsilon=4.0</span></em>, <em class="sig-param"><span class="pre">delta=None</span></em>, <em class="sig-param"><span class="pre">percentile_percentage=99</span></em>, <em class="sig-param"><span class="pre">percentile_epsilon_proportion=0.01</span></em>, <em class="sig-param"><span class="pre">accuracy_mode=&lt;builtins.AccuracyMode</span> <span class="pre">object&gt;</span></em>, <em class="sig-param"><span class="pre">number_of_records_epsilon_proportion=0.005</span></em>, <em class="sig-param"><span class="pre">fabrication_mode=&lt;builtins.FabricationMode</span> <span class="pre">object&gt;</span></em>, <em class="sig-param"><span class="pre">empty_value=''</span></em>, <em class="sig-param"><span class="pre">use_synthetic_counts=False</span></em>, <em class="sig-param"><span class="pre">weight_selection_percentile=95</span></em>, <em class="sig-param"><span class="pre">aggregate_counts_scale_factor=None</span></em>, <em class="sig-param"><span class="pre">verbose=False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/snsynth/aggregate_seeded/aggregate_seeded.html#AggregateSeededSynthesizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#snsynth.aggregate_seeded.AggregateSeededSynthesizer" title="Permalink to this definition">#</a></dt>
<dd><p>SmartNoise class wrapper for Private Aggregate Seeded Synthesizer from pac-synth.
Works with Pandas data frames, raw data and follows norms set by other SmartNoise synthesizers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reporting_length</strong> (<em>int</em>) – The maximum length of the combinations to be synthesized.  For example,
if reporting length is 2, the synthesizer will compute DP marginals for all two-column combinations
in the dataset.</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – The privacy budget to be used for the synthesizer.</p></li>
<li><p><strong>delta</strong> – The delta value to be used for the synthesizer.  If set, should be small, in the range
of 1/(n * sqrt(n)), where n is the approximate number of records in the dataset.</p></li>
<li><p><strong>percentile_percentage</strong> (<em>int</em>) – Because the synthesizer computes multiple n-way marginals, each individual may
affect multiple marginals.  The <code class="docutils literal notranslate"><span class="pre">percentile_percentage</span></code> can remove the influence of outliers to
reduce sensitivity and improve the accuracy of the synthesizer.  For example, if <code class="docutils literal notranslate"><span class="pre">percentile_percentage</span></code>
is 99, the synthesizer will use a sensitivity that can accomodate 99% of the individuals, and will ensure
that the records of the outlier 1% are sampled to conform to this sensitivity.</p></li>
<li><p><strong>percentile_epsilon_proportion</strong> (<em>float</em>) – The proportion of the epsilon budget to be used to estimate the
percentile sensitivity.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – Show diagnostic information about the synthesizer’s progress.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>See the <a class="reference external" href="https://github.com/microsoft/synthetic-data-showcase/blob/main/docs/dp/README.md">pac-synth documentation</a> </dt><dd><p>for more details about these and other hyperparameters.</p>
</dd>
<dt>Reuses code and modifies it lightly from </dt><dd><p><a class="reference external" href="https://github.com/microsoft/synthetic-data-showcase/tree/main/packages/lib-pacsynth">pac-synth</a>.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="mst.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Maximum Spanning Tree (MST)</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="dpctgan.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Differentially Private Conditional Tabular GAN (DPCTGAN)</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fas fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#parameters">
   Parameters
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="../_sources/synthesizers/pac_synth.rst.txt">
        <i class="fas fa-file-alt"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2023.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.1.2.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>